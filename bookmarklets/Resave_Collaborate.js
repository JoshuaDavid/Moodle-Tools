/* Resave a collaborate session as a new session. Allows fast batch creation of sessions. */
javascript:var jq = document.createElement('script'); document.head.appendChild(jq); jq.onload = main; jq.src = window.location.protocol + '//code.jquery.com/jquery.min.js'; function main() { var delay = 0; $('.elluminate').slice(0).each(function() { var href = $(this).find('.editing_update').attr('href'); var $link = $(this); $link.css('background', '#ff3377'); $.get(href, function(response) { var $form = $(response).find('form'); $link.css('background', '#ffcc33'); var action = $form.attr('action'); var data = {}; $form.serializeArray().forEach(function(el) { data[el.name] = el.value; }); var until = data['timeend[year]']  +  '-'; until    += data['timeend[month]'] + '-'; until    += data['timeend[day]']; if(new Date(until) >= new Date()) { setTimeout(function() { $link.css('background', '#ccff33'); $.post(action, data, function() { console.log("Done!", data); $link.css('background', '#33ccff'); }); }, delay); delay += 1000; } else { $link.css('background', '#cccccc'); } }); }); }; void 0;
